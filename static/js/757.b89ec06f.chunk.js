"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[757],{757:function(e,a,s){s.r(a),s.d(a,{default:function(){return S}});var i=s(5861),r=s(9439),n=s(4687),t=s.n(n),l="RegistrationPage_container__o9QxY",o="RegistrationPage_title__pXe0V",m="RegistrationPage_text__fWsu9",c="RegistrationPage_infoContainer__4Qzr7",d="RegistrationPage_block__CFZqZ",u=s(6473),h=s(8870),g=s(6752),p="RegistrationForm_loginForm__PNfPw",v="RegistrationForm_formInput__m+H0J",_="RegistrationForm_passInput__m655N",x="RegistrationForm_btnCont__GcnzE",f="RegistrationForm_pswdVisBtn__lIwYN",j="RegistrationForm_pswdBtnImg__ZD7sr",w="RegistrationForm_errorMessage__I5ZMQ",N=s(9434),P=s(5705),k=s(2797),y=s(2791),R=s(8724),Z=s(184),b=k.Ry().shape({name:k.Z_().min(2,"Name length must be at least 2 characters long").required("Name is required"),email:k.Z_().email("Invalid email").required("Email is required"),password:k.Z_().min(6,"Password must contain 6 or more characters!").required("Password is required")}),F=function(){var e=(0,y.useState)(!1),a=(0,r.Z)(e,2),s=a[0],i=a[1],n=(0,N.I0)(),t=(0,y.useState)(""),l=(0,r.Z)(t,2),o=l[0],m=l[1];return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(P.J9,{initialValues:{name:"",email:"",password:""},validationSchema:b,onSubmit:function(e,a){n((0,R.Ik)(e)).then((function(e){"users/signup/rejected"===(null===e||void 0===e?void 0:e.type)&&m(null===e||void 0===e?void 0:e.payload),console.log(o)})),a.resetForm()},children:function(e){var a=e.handleSubmit,r=e.errors,n=e.touched;return(0,Z.jsxs)(P.l0,{className:p,children:[(0,Z.jsx)(P.gN,{className:v,type:"name",name:"name",title:"Please enter your name or nickname'",placeholder:"Name *","min-length":"2",required:!0,id:"name"}),r.name&&n.name?(0,Z.jsxs)("div",{className:w,children:["* ",r.name]}):null,'"email" must be a valid email'===o&&"Email in use"===o||n.name?null:(0,Z.jsx)("div",{className:w,children:o}),(0,Z.jsx)(P.gN,{className:v,type:"email",name:"email",title:"Please enter valid email address, for example  'example@gmail.com'",placeholder:"Email *","min-length":"6",required:!0,id:"email"}),r.email&&n.email?(0,Z.jsxs)("div",{className:w,children:["* ",r.email]}):null,'"email" must be a valid email'!==o&&"Email in use"!==o||n.email?null:(0,Z.jsx)("div",{className:w,children:o}),(0,Z.jsx)(P.gN,{className:v+" "+_,type:s?"text":"password",name:"password",title:"Please enter your password. Minimum length 8 symbols",placeholder:"Password *","min-length":"8",required:!0,id:"password"}),(0,Z.jsx)("button",{className:f,onClick:function(){i(!s)},type:"button",children:(0,Z.jsx)("img",{className:j,src:s?u.Z:h.Z,alt:"Button show/hide password"})}),r.password&&n.password?(0,Z.jsxs)("div",{className:w,children:["* ",r.password]}):null,o&&"Password is wrong"===o&&!n.password?(0,Z.jsx)("div",{className:w,children:o}):null,(0,Z.jsx)("div",{className:x,children:(0,Z.jsx)(g.zx,{isPrimaryButton:!1,text:"Register",width:182,onClick:function(){a()}})})]})}})})},I=s(4654),q=s(9279),C=s(9655),S=function(){var e=(0,N.v9)(I.vc),a=(0,N.v9)(I.r2),s=(0,N.v9)(I.PR),n=(0,y.useState)(!1),u=(0,r.Z)(n,2),h=u[0],p=u[1],v=(0,y.useState)(10),_=(0,r.Z)(v,2),x=_[0],f=_[1],j=(0,y.useState)("\u0421lick to resend"),w=(0,r.Z)(j,2),P=w[0],k=w[1];(0,y.useEffect)((function(){if(h){var e=setInterval((function(){x<=0?(k("\u0421lick to resend"),p(!1),f(10)):(f(x-1),k(x))}),1e3);return function(){return clearInterval(e)}}}));var R=(0,Z.jsx)(Z.Fragment,{children:a?(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)("div",{className:c,children:[(0,Z.jsxs)("h3",{className:o,children:[s.name,", thank you for your registration. We've sent you a verification email."]}),(0,Z.jsx)("p",{className:m,children:"If you've not received this email"}),(0,Z.jsx)(g.zx,{isPrimaryButton:!1,text:"".concat(P),width:182,isDisabled:h,onClick:(0,i.Z)(t().mark((function e(){var a,i,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.ZP.post("/users/verify",{email:s.email});case 3:a=e.sent,p(!0),C.Am.success(a.data.message),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),C.Am.error(null===(i=e.t0.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))})]})}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("h3",{className:o,children:"Register"}),(0,Z.jsx)(F,{})]})});return(0,Z.jsx)("main",{children:(0,Z.jsx)("div",{className:l,children:e?(0,Z.jsx)("div",{className:d,children:(0,Z.jsx)(g.aN,{})}):R})})}}}]);
//# sourceMappingURL=757.b89ec06f.chunk.js.map